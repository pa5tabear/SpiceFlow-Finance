# Sprint 5 Plan – Close Functional Gaps & Deliver Truthful Reporting

**Duration:** 4 days (Mon–Thu)
**Sprint Goal:** Ship the end-to-end automated lease analysis pipeline promised in Milestone 1: extractor, valuation wrapper, JSON store, and autogenerated Markdown reports—all backed by passing tests.

---

## User Stories

### Story 1 – Finalize `extract.py`
*Acceptance*
- Parses 6/8 leases (all text-based PDFs) into JSON with no manual edits.
- Follows “no hallucination” rule; missing fields are `null`.

### Story 2 – Create `scripts/analyze_leases.py`
*Acceptance*
- Single command orchestrates extraction + valuation + report generation.
- Generates/updates:
  - `leases.json`
  - `output/lease_summary.md` (Markdown table)

### Story 3 – Generate Accurate Lease Summary Table
*Acceptance*
- Table rows pull directly from `leases.json`; rent blanks remain blank (no fake numbers).
- PV and offer columns filled for rows with numeric rent & term data.

### Story 4 – Update Milestone 1 Review
*Acceptance*
- `project-management/sprint-reviews/milestone-1-review.md` rewritten to match reality (file paths, processed counts, metrics).

### Story 5 – Unit-test Coverage ≥90 %
*Acceptance*
- Add fixtures for Nexamp, Wind-Farm, Consent PDFs.
- CI passes with coverage badge update.

---

## Timebox & Tasks
| Day | Task | Est. hrs |
|-----|------|----------|
| Mon | Robustify regex patterns, parse Nexamp & enXco | 4 |
| Tue AM | Build wrapper script, update `leases.json` | 3 |
| Tue PM | Markdown table auto-writer + styling | 2 |
| Wed | Tests, fixtures, edge-case handling | 4 |
| Thu | Rewrite milestone review, polish docs, buffer | 3 |

---

## Definition of Done
- `python scripts/analyze_leases.py` runs clean on `main` and regenerates table & JSON.
- At least 75 % of fields across 8 leases populated (nulls allowed where truly redacted).
- CI green, coverage ≥90 %.
- Updated milestone review merged.

---

## Out-of-Scope
- Credit-risk lookup (stretch from Sprint 4) – schedule for Sprint 6.
- UI/Streamlit front-end.

---

Prepared by PM – 2025-07-12 